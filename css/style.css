/* =========================================== */
/* 品牌色與變數定義 (V6.7 - 顏色/尺寸/手風琴優化版) */
/* =========================================== */
:root {
    /* 核心色調與文字 */
    --primary-color: #131A21;   /* 深夜石墨藍 */
    --secondary-color: #8D99AE; /* 次要文字/輔助線 */
    --accent-color: #B58F5C;    /* 典雅古銅金 */
    --accent-color-hover: #C9A873; /* 古銅金懸停色 */
    --text-dark: #2B2B2B;       /* 內文標準色 */
    --text-light: #F9F9F9;      /* 深色背景文字 */
    
    /* 背景與基礎 */
    --bg-light: #FFFFFF;        
    --bg-section: #F7F7F7;      
    
    /* 輔助與光影 */
    --border-color: #E0E0E0;    
    --shadow-small: 0 1px 3px rgba(0, 0, 0, 0.05); /* 原 shadow-light */
    --shadow-medium: 0 8px 25px rgba(0, 0, 0, 0.12); 
    --shadow-accent: 0 4px 15px rgba(181, 143, 92, 0.5); 
    
    /* 統一樣式變數：排版與安全區域 */
    --safe-area-pad-h: 40px;    
    --safe-area-pad-h-sm: 15px; 
    --header-height: 70px;      
    --section-pad-v: 60px;      
    --content-max-width: 1200px;
}

/* =========================================== */
/* 基礎樣式 (Mobile-First Base Styles) */
/* =========================================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

img, video {
    max-width: 100%;
    height: auto;
    display: block; 
}

body {
    font-family: 'Noto Sans TC', sans-serif; 
    line-height: 1.7; 
    color: var(--text-dark);
    background-color: var(--bg-light);
    overflow-x: hidden; /* 防止水平捲動條 */
}

h1, h2, h3, h4, .logo a {
    font-family: 'Noto Serif TC', serif; 
    color: var(--primary-color); 
    letter-spacing: 0.5px; 
}
.hero-content h1 {
    color: var(--text-light); 
}

a {
    color: var(--primary-color);
    text-decoration: none;
    transition: color 0.4s ease-in-out, opacity 0.4s ease-in-out; 
}

a:hover {
    color: var(--accent-color);
}

ul {
    list-style: none;
}

/* 核心排版：內容安全區域 - 預設為手機 (small) */
.container {
    max-width: var(--content-max-width); 
    margin: 0 auto;
    padding-top: calc(var(--section-pad-v) / 2);
    padding-bottom: calc(var(--section-pad-v) / 2);
    /* Mobile-First: 預設使用小間距 */
    padding-left: max(var(--safe-area-pad-h-sm), env(safe-area-inset-left));
    padding-right: max(var(--safe-area-pad-h-sm), env(safe-area-inset-right));
}

section {
    /* Mobile-First: 預設使用小間距 */
    padding: 40px 0; 
}

.first-section {
    padding-top: calc(var(--header-height) + 30px); 
}

/* =========================================== */
/* 標題樣式 (Typography) - Mobile-First */
/* =========================================== */
h1 {
    font-size: 2rem; /* Mobile */
    font-weight: 700;
    line-height: 1.3;
}
h2 {
    font-size: 1.8rem; /* Mobile */
    font-weight: 700;
    text-align: center;
    line-height: 1.3;
    word-break: keep-all; 
    overflow-wrap: break-word; 
    position: relative; 
    margin-bottom: 40px; 
}
h2::after {
    content: '';
    position: absolute;
    bottom: -15px; 
    left: 50%;
    transform: translateX(-50%);
    width: 50px; 
    height: 3px; 
    background-color: var(--accent-color);
}
h3 {
    font-size: 1.4rem; /* Mobile */
    font-weight: 500; 
    margin-bottom: 12px; 
}
p {
    font-size: 0.95rem; 
    margin-bottom: 20px; 
    max-width: 750px; 
    margin-left: auto;
    margin-right: auto;
    color: var(--text-dark); 
}
.text-center {
    text-align: center;
}

/* =========================================== */
/* Header & Navigation - Mobile-First */
/* =========================================== */
header {
    background-color: var(--bg-light); 
    box-shadow: var(--shadow-small); 
    position: sticky;
    top: 0;
    z-index: 1000;
    display: flex;
    justify-content: space-between;
    align-items: center;
    min-height: var(--header-height);
    
    /* 使用 Mobile-First 小間距 */
    padding: 8px 0; 
    padding-left: max(var(--safe-area-pad-h-sm), env(safe-area-inset-left));
    padding-right: max(var(--safe-area-pad-h-sm), env(safe-area-inset-right));
    padding-top: calc(8px + env(safe-area-inset-top)); 
}

.logo a {
    font-size: 1.5rem; /* Mobile */
    font-weight: 900;
    letter-spacing: 1px; 
    white-space: nowrap; 
}

/* 導航主菜單 - 預設隱藏 (手機) */
#main-nav {
    display: block; 
    position: absolute;
    top: 100%; 
    left: 0;
    width: 100%;
    background-color: var(--bg-light); 
    box-shadow: 0 4px 10px var(--shadow-medium);
    z-index: 999;
    
    max-height: 0; 
    overflow: hidden;
    opacity: 0;
    pointer-events: none;
    transition: max-height 0.4s ease-in-out, opacity 0.3s ease-out;
}

#main-nav.active { 
    max-height: 80vh; 
    opacity: 1;
    pointer-events: all;
}

#main-nav ul {
    flex-direction: column; /* 手機上垂直堆疊 */
    gap: 15px; 
    padding-left: max(var(--safe-area-pad-h-sm), env(safe-area-inset-left));
    padding-right: max(var(--safe-area-pad-h-sm), env(safe-area-inset-right));
    padding-top: 20px;
    padding-bottom: 20px;
    align-items: flex-start; 
}
#main-nav a {
    color: var(--primary-color);
    padding: 5px 0;
    font-weight: 400; 
    position: relative;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

.contact-nav {
    width: 100%; 
    margin-top: 10px;
}
.contact-nav a {
    display: block; 
    text-align: center;
    padding: 10px 18px; 
    
    background-color: var(--accent-color); 
    color: var(--primary-color) !important; 
    border-radius: 50px; 
    font-weight: 600;
    box-shadow: var(--shadow-accent);
    transition: all 0.3s ease-out; 
    white-space: nowrap;
}
.contact-nav a:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px var(--shadow-accent);
    background-color: var(--accent-color-hover); 
}

.mobile-menu-btn {
    display: block; /* Mobile-First: 預設顯示 */
    background: var(--accent-color);
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
    color: var(--primary-color); 
    font-weight: 700;
    white-space: nowrap;
    z-index: 1001; 
}


/* =========================================== */
/* Hero & CTA - Mobile-First */
/* =========================================== */
.hero-section {
    height: 50vh; /* Mobile */
    min-height: 300px;
    background-size: cover;
    background-position: center;
    background-attachment: scroll; /* Mobile 上使用 scroll 避免效能問題 */
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    text-align: center;
}
.hero-content h1 {
    font-size: 2.2rem; /* Mobile */
    color: white;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.6); 
    margin-bottom: 15px;
}
.hero-content p {
    color: var(--text-light); 
    font-size: 1rem; /* Mobile */
    margin-bottom: 25px;
    font-weight: 300;
    letter-spacing: 1px;
}
.cta-button.large {
    padding: 15px 30px; /* Mobile */
    font-size: 1rem;
}


/* =========================================== */
/* Commitment & Card Grid */
/* =========================================== */
.card-grid {
    /* 確保手機上能自動堆疊 */
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
    gap: 25px; 
    margin-top: 20px; 
}


/* =========================================== */
/* Flow Chart Style - Mobile-First */
/* =========================================== */
.flow-chart ol {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    list-style: none;
    padding: 20px 0;
    gap: 15px;
    /* 預設手機版：垂直堆疊 */
    flex-direction: column;
    align-items: center;
}
.flow-chart li {
    /* ... 樣式保持不變 ... */
    position: relative;
}
.flow-chart li:not(:last-child)::after {
    /* 預設手機版：向下箭頭 */
    content: '↓';
    position: absolute;
    right: 50%;
    top: 100%;
    transform: translate(50%, -50%);
    font-weight: 300;
    color: var(--secondary-color);
}


/* =========================================== */
/* Footer & Floating CTA - Mobile-First */
/* =========================================== */
footer {
    /* Mobile-First: 縮小內邊距 */
    padding: 30px 0 15px 0; 
    font-size: 0.9rem;
}
.footer-grid {
    /* Mobile-First: 單欄堆疊 */
    display: grid;
    grid-template-columns: 1fr;
    text-align: center;
    gap: 30px;
    padding-bottom: 30px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.25); 
}

.floating-cta {
    position: fixed;
    z-index: 990;
    display: flex; 
    flex-direction: column; 
    gap: 8px; /* Mobile */
    
    right: max(15px, env(safe-area-inset-right)); /* Mobile */
    bottom: max(15px, env(safe-area-inset-bottom)); /* Mobile */
}

.floating-cta a {
    width: 45px; /* Mobile */
    height: 45px;
    line-height: 45px;
    font-size: 1.6rem; /* Mobile */
    /* ... 樣式保持不變 ... */
}


/* ==================================================== */
/* RWD - 響應式設計：900px 以下 (Tablet & Mobile-L) */
/* ==================================================== */

@media (min-width: 601px) and (max-width: 900px) {
    /* 容器間距調整 */
    .container {
        padding-left: max(30px, env(safe-area-inset-left));
        padding-right: max(30px, env(safe-area-inset-right));
    }
    header {
        padding-left: max(30px, env(safe-area-inset-left));
        padding-right: max(30px, env(safe-area-inset-right));
    }

    /* 導航 (保持手機樣式，但優化間距) */
    #main-nav ul {
        padding-left: max(30px, env(safe-area-inset-left));
        padding-right: max(30px, env(safe-area-inset-right));
    }

    /* 關於我們頁面優化 (900px 斷點) */
    .profile-detail {
        flex-direction: column;
    }
    .profile-image-container {
        flex: 0 0 auto;
        width: 100%; 
        max-width: 450px;
        margin: 0 auto 20px;
    }
    .profile-image {
        height: 350px; 
    }
    .profile-detail .profile-text {
        text-align: left; /* 保持左對齊 */
    }
    .profile-detail .profile-text p {
        margin-left: 0;
        margin-right: 0;
    }

    /* 聯絡我們頁面優化 */
    .contact-grid-2col {
        grid-template-columns: 1fr; /* 單欄佈局 */
        gap: 40px;
    }
}

/* ==================================================== */
/* RWD - 響應式設計：901px 及以上 (Desktop/Tablet-L) */
/* ==================================================== */

@media (min-width: 901px) {
    /* 容器間距擴大到電腦標準 */
    .container {
        padding-left: max(var(--safe-area-pad-h), env(safe-area-inset-left));
        padding-right: max(var(--safe-area-pad-h), env(safe-area-inset-right));
    }
    section {
        padding: var(--section-pad-v) 0; 
    }

    /* Header & Navigation - 電腦版 */
    header {
        padding: 10px 0; 
        padding-left: max(var(--safe-area-pad-h), env(safe-area-inset-left));
        padding-right: max(var(--safe-area-pad-h), env(safe-area-inset-right));
        padding-top: calc(10px + env(safe-area-inset-top)); 
    }
    
    .logo a {
        font-size: 1.8rem; 
    }
    
    .mobile-menu-btn {
        display: none; /* 隱藏漢堡菜單 */
    }
    
    #main-nav {
        /* 取消手機選單樣式，改回 Flex 排列 */
        position: static;
        display: block;
        max-height: none;
        overflow: visible;
        opacity: 1;
        pointer-events: all;
        box-shadow: none;
        width: auto;
    }
    
    #main-nav ul {
        display: flex; /* 橫向排列 */
        flex-direction: row;
        gap: 30px; 
        padding: 0;
        align-items: center;
    }

    .contact-nav {
        width: auto; 
        margin-top: 0;
    }
    .contact-nav a {
        display: inline-block; 
        text-align: left;
        padding: 8px 18px; 
    }

    /* Hero & Typography - 電腦版 */
    h1 {
        font-size: 3rem; 
    }
    h2 {
        font-size: 2.2rem; 
    }
    h3 {
        font-size: 1.6rem; 
    }
    
    .hero-section {
        height: 60vh; 
        background-attachment: fixed; /* 重新啟用視差捲動 */
    }
    .hero-content h1 {
        font-size: 3.5rem; 
        margin-bottom: 25px;
    }
    .hero-content p {
        font-size: 1.3rem; 
        margin-bottom: 40px;
    }
    .cta-button.large {
        padding: 18px 40px;
        font-size: 1.2rem;
    }

    /* Flow Chart - 電腦版：改為橫向 */
    .flow-chart ol {
        flex-direction: row;
        align-items: center;
    }
    .flow-chart li:not(:last-child)::after {
        content: '→';
        right: -25px;
        top: 50%;
        transform: translateY(-50%);
    }

    /* Footer - 電腦版：改為四欄 */
    .footer-grid {
        grid-template-columns: 2.5fr 1.5fr 1.5fr 1.5fr;
        text-align: left;
    }

    /* 關於我們頁面 - 電腦版：兩欄佈局 */
    .profile-detail {
        flex-direction: row;
    }

    /* 聯絡我們頁面 - 電腦版：兩欄佈局 */
    .contact-grid-2col {
        grid-template-columns: 1fr 1fr;
    }
}

/* ==================================================== */
/* RWD - 響應式設計：993px 及以上 (Blog Page 佈局專用) */
/* ==================================================== */

@media (min-width: 993px) {
    /* 核心雙欄佈局 */
    .blog-page-layout {
        /* 側邊欄固定寬度 280px，文章區佔滿剩餘空間 */
        grid-template-columns: 280px 1fr; 
        gap: 40px;
        align-items: flex-start; 
    }

    /* 側邊欄樣式 */
    .blog-sidebar {
        padding: 20px 0;
        position: sticky; /* 讓側邊欄可以固定在頂部 */
        top: 100px; 
        order: 0; /* 恢復正常順序 */
        margin-bottom: 0;
    }
    .blog-sidebar h3 {
        border-bottom: 2px solid var(--primary-color);
        text-align: left;
        margin-bottom: 15px;
    }
    .blog-sidebar .category-list {
        display: block; /* 垂直堆疊 */
        border-bottom: none;
    }
    .blog-sidebar .category-list li a {
        text-align: left;
        padding: 10px 15px;
        border: none;
    }
}


/* ==================================================== */
/* RWD - 響應式設計：1025px 及以上 (大電腦螢幕優化) */
/* ==================================================== */

@media (min-width: 1025px) {
    /* 進一步擴大安全區域 padding */
    .container {
        padding-left: max(var(--safe-area-pad-h), env(safe-area-inset-left));
        padding-right: max(var(--safe-area-pad-h), env(safe-area-inset-right));
    }
}
